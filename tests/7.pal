{
    7.pal
    Correct
}
program ControlTheFlow (io, oi);

type states = (good, bad, ugly);

var state1 : states;
    state2 : states;
    state3 : states;
    counter : integer;
    
procedure incrCounter();
// increments counter, but slides back to 1 when it hits 3
    const MAXCOUNT = 3;

    begin
        if counter >= MAXCOUNT then
            counter = 1
        else
            counter = counter + 1;
    end;
    
function setState(var state : states; currState : char) : boolean;
// sets state based on currState and returns if currState was indicating a
// legal state indicator ('g', 'b', or 'u')
    begin
        setState := true;
        if currState = 'g' then
            state := good
        else if currState = 'b' then
            state := bad
        else if currState = 'u' then
            state := ugly
        else
            setState := false;
    end;
    
procedure getState();
// asks for the current state and sets it based on user input (will not accept
// an invalid state indicator)
    var currState : char;

    begin
        write('What is the state now (g, b, u)? ');
        read(currState);
        
        if counter = 1 then
        begin
            if not setState(state1, currState) then
                getState()
        end
        else if counter = 2 then
        begin
            if not setState(state2, currState) then
                getState()
        end
        else // counter = 3
        begin
            if not setState(state2, currState) then
                getState()
        end;
        
        
    end;

begin
    

//     while()
end.
